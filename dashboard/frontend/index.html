<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡∏±‡πà‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ç‡∏¢‡∏∞‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ‚îÄ‚îÄ Navbar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <nav class="ss-navbar">
        <span class="ss-brand">Senses Scale</span>
        <div style="display:flex;align-items:center;gap:12px;">
            <a href="add-devices.html" class="ss-btn" title="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT" style="text-decoration:none;">
                <i class="bi bi-cpu-fill"></i> Devices
            </a>
            <span class="ss-username" id="navUsername"></span>
            <span class="ss-logout" title="‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö" onclick="logout()">
                <i class="bi bi-box-arrow-right"></i>
            </span>
        </div>
    </nav>

    <!-- ‚îÄ‚îÄ Toolbar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="ss-toolbar">
        <div class="ss-toolbar-left">
            <span class="ss-devcount">
                Devices (<span id="totalDepts">--</span> / <span id="totalDepts2">--</span>)
            </span>
        </div>
        <div class="ss-toolbar-center">
            <span class="ss-online">Online (<span id="activeWeighing">--</span>)</span>
        </div>
        <div class="ss-toolbar-right">
            <button class="ss-btn" id="btnFilter" onclick="toggleFilter()">
                <i class="bi bi-funnel-fill"></i> Filter
            </button>
            <button class="ss-btn" id="btnChart" onclick="toggleCharts()">
                <i class="bi bi-bar-chart-fill"></i> Chart
            </button>
            <button class="ss-btn" onclick="showExportModal('csv')">
                <i class="bi bi-filetype-csv"></i> CSV
            </button>
            <button class="ss-btn" onclick="showExportModal('xlsx')">
                <i class="bi bi-file-earmark-spreadsheet"></i> Xlsx Report
            </button>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Filter Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div id="filterPanel" class="ss-filter-panel ss-hidden">
        <span class="ss-filter-label">‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£:</span>
        <button class="ss-filter-btn active" data-status="all"     onclick="setFilter('all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button class="ss-filter-btn"        data-status="good"    onclick="setFilter('good')">üü¢ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ä‡∏±‡πà‡∏á</button>
        <button class="ss-filter-btn"        data-status="medium"  onclick="setFilter('medium')">üü° ‡∏¢‡∏≠‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
        <button class="ss-filter-btn"        data-status="high"    onclick="setFilter('high')">ü©∑ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏î 24 ‡∏ä‡∏°.</button>
        <button class="ss-filter-btn"        data-status="offline" onclick="setFilter('offline')">‚ö´ ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏î‡πÄ‡∏Å‡∏¥‡∏ô 48 ‡∏ä‡∏°.</button>
    </div>

    <!-- ‚îÄ‚îÄ Charts Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div id="chartsPanel" class="ss-charts-panel ss-hidden">
        <div class="ss-charts-inner">
            <div class="ss-chart-card">
                <div class="ss-chart-header">
                    <i class="bi bi-graph-up"></i> ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ç‡∏¢‡∏∞‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏™‡∏∞‡∏™‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡∏Å‡∏Å.) ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô
                </div>
                <canvas id="fillLevelChart"></canvas>
            </div>
            <div class="ss-chart-card">
                <div class="ss-chart-header">
                    <i class="bi bi-pie-chart-fill"></i> ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô
                </div>
                <canvas id="statusPieChart"></canvas>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Main Grid ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="ss-main">
        <div id="binsGrid" class="ss-grid"></div>
    </div>

    <!-- ‚îÄ‚îÄ Overlay layers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div id="overlayBg"    class="ss-overlay-bg ss-hidden" onclick="closeAllPanels()"></div>
    <div id="overlayModal" class="ss-overlay-bg ss-hidden" onclick="closeModal()"></div>

    <!-- ‚îÄ‚îÄ Alerts Side Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div id="alertsPanel" class="ss-alerts-panel ss-hidden">
        <div class="ss-alerts-header">
            <span><i class="bi bi-bell-fill"></i> ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</span>
            <button class="ss-close" onclick="closeAllPanels()">&#x2715;</button>
        </div>
        <div id="alertsList" class="ss-alerts-list"></div>
    </div>

    <!-- ‚îÄ‚îÄ Export Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div id="exportModal" class="ss-modal ss-hidden">
        <div class="ss-modal-header">
            <span id="exportTitle">Export to CSV</span>
            <button class="ss-close" onclick="closeExport()">&#x2715;</button>
        </div>
        <div class="ss-modal-body ss-export-body">
            <div class="ss-export-row">
                <label class="ss-export-label">Start</label>
                <div class="ss-export-inputs">
                    <input type="date" id="exportStartDate" class="ss-input">
                    <input type="time" id="exportStartTime" class="ss-input" value="00:00">
                </div>
            </div>
            <div class="ss-export-row">
                <label class="ss-export-label">End</label>
                <div class="ss-export-inputs">
                    <input type="date" id="exportEndDate" class="ss-input">
                    <input type="time" id="exportEndTime" class="ss-input" value="23:59">
                </div>
            </div>
            <div class="ss-export-actions">
                <button class="ss-btn ss-btn-export" id="exportDoBtn" onclick="doExport()">
                    Export
                </button>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Detail Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div id="detailModal" class="ss-modal ss-hidden">
        <div class="ss-modal-header">
            <span id="modalTitle">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</span>
            <button class="ss-close" onclick="closeModal()">&#x2715;</button>
        </div>
        <div id="modalBody" class="ss-modal-body"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
