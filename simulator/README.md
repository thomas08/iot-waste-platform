# IoT Device Simulator

‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á IoT sensors ‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞ ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á MQTT broker

## ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥

- ‚úÖ ‡∏à‡∏≥‡∏•‡∏≠‡∏á sensors ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• real-time: ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ï‡πá‡∏°, ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥, ‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà, ‡∏Ø‡∏•‡∏Ø
- ‚úÖ ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡∏¢‡∏∞‡πÅ‡∏ö‡∏ö‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÑ‡∏õ
- ‚úÖ ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏¢‡∏∞‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô MQTT protocol
- ‚úÖ Configurable interval ‡πÅ‡∏•‡∏∞ duration

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
pip install -r ../requirements.txt

# ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
pip install paho-mqtt
```

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Simulator

```bash
# ‡πÄ‡∏£‡∏¥‡πà‡∏° simulator (‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
python3 iot_device_simulator.py
```

### ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Configuration

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô `iot_device_simulator.py`:

```python
# MQTT Broker Settings
simulator = IoTSimulator(mqtt_broker="localhost", mqtt_port=1883)

# ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î bins
simulator.add_bin("1", "BIN001", "Building A - Floor 1", 120, "general")

# ‡∏õ‡∏£‡∏±‡∏ö interval (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ‡πÅ‡∏•‡∏∞ duration
simulator.run(interval=10, duration=None)  # None = run forever
```

## MQTT Topics

Simulator ‡∏à‡∏∞ publish ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á topics:
- `waste/bins/BIN001/sensors`
- `waste/bins/BIN002/sensors`
- `waste/bins/BIN003/sensors`
- ‡∏Ø‡∏•‡∏Ø

## ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (JSON Format)

```json
{
  "bin_id": "1",
  "bin_code": "BIN001",
  "sensor_code": "SENS001",
  "location": "Building A - Floor 1",
  "bin_type": "general",
  "fill_level": 45.23,
  "distance_cm": 65.12,
  "weight_kg": 27.14,
  "temperature_c": 28.5,
  "humidity": 55.3,
  "gas_level": 3.2,
  "battery_level": 87.5,
  "signal_strength": -45,
  "timestamp": "2025-12-19T10:30:00"
}
```

## ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á

### Fill Level (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ï‡πá‡∏°)
- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 10-40%
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÑ‡∏õ (0.5-2% ‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á)
- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á 85% ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ 10% ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å "‡πÄ‡∏Å‡πá‡∏ö" (reset)

### Temperature (‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥)
- ‡∏ä‡πà‡∏ß‡∏á 20-30¬∞C
- ‡πÅ‡∏Å‡∏ß‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á ¬±0.5¬∞C

### Battery (‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà)
- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà 80-100%
- ‡∏•‡∏î‡∏•‡∏á 0.01% ‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á

## ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Output

```
2025-12-19 10:30:00 - INFO - üîå Connecting to MQTT broker localhost:1883...
2025-12-19 10:30:00 - INFO - ‚úÖ Connected to MQTT Broker
2025-12-19 10:30:00 - INFO - üöÄ Starting simulation with 5 bins

============================================================
Iteration 1 - 2025-12-19 10:30:00
============================================================
üü¢ BIN001: Fill=35.2% | Temp=25.3¬∞C | Battery=95.2%
üü¢ BIN002: Fill=42.1% | Temp=27.8¬∞C | Battery=91.5%
üü° BIN003: Fill=68.5% | Temp=26.1¬∞C | Battery=88.3%
üî¥ BIN004: Fill=89.2% | Temp=29.4¬∞C | Battery=85.7%
üü¢ BIN005: Fill=45.8% | Temp=24.9¬∞C | Battery=93.1%
```

## ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

‡∏Å‡∏î `Ctrl+C` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î simulator

## Troubleshooting

### ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MQTT Broker

```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ MQTT broker ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà
sudo docker compose ps

# ‡∏î‡∏π logs
sudo docker compose logs mqtt
```

### Permission Error

```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå executable
chmod +x iot_device_simulator.py
```
