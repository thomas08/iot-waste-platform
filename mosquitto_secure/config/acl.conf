# ===========================================
# Mosquitto Access Control List (ACL)
# IoT Waste Management Platform
# ===========================================
#
# Format:
#   user <username>
#   topic [read|write|readwrite] <topic>
#
# Wildcards:
#   + = single level wildcard (e.g., waste/bins/+/sensors)
#   # = multi level wildcard (e.g., waste/bins/#)
#
# ===========================================

# ---------------------
# Admin User
# ---------------------
# Full access to all topics
user mqtt_admin
topic readwrite #

# ---------------------
# IoT Devices
# ---------------------
# IoT devices can:
# - Publish sensor data to waste/bins/{bin_code}/sensors
# - Subscribe to control commands (future feature)
user iot_device

# Allow publishing to all bin sensor topics
topic write waste/bins/+/sensors

# Allow reading control commands (for future use)
topic read waste/bins/+/commands

# Allow reading system-wide broadcasts
topic read waste/system/#

# ---------------------
# Backend Service
# ---------------------
# Backend subscriber can read all sensor data
user backend_service

# Subscribe to all bin sensor topics
topic read waste/bins/+/sensors

# Subscribe to all waste topics
topic read waste/#

# Can publish system messages
topic write waste/system/#

# ---------------------
# Dashboard/API Service
# ---------------------
# Dashboard can read data and send commands
user dashboard_service

# Read all sensor data
topic read waste/bins/#

# Read system messages
topic read waste/system/#

# Can send commands to bins
topic write waste/bins/+/commands

# ---------------------
# Default: Deny all
# ---------------------
# Any user not listed above is denied access
# (this is implicit in Mosquitto when ACL is enabled)
